{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AudioX - An Audiobook Platform{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Header -->
    <header class="navbar navbar-expand-lg shadow-sm bg-white">
        <div class="container-fluid py-3">
            <!-- Logo and Menu -->
            <button class="btn menu-btn" id="menu-toggle">
                â˜°
            </button>
            <a href="#" class="navbar-brand text-primary fw-bold fs-3">
                Audio<span class="logo-highlight">X</span>
            </a>

            <!-- Search Bar -->
            <div class="search-container mx-3">
                <div class="search-bar position-relative">
                    <input type="text" id="search-input" placeholder="Search audiobooks & stories" aria-label="Search">
                    <button class="search-icon-btn" id="search-btn" title="Search">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <button class="voice-icon-btn" id="voice-search-btn" title="Search by Voice">
                    <img src="{% static 'img/microphone-icon.png' %}" alt="Microphone" class="mic-icon">
                </button>
            </div>

            <!-- Language Selector and Buttons -->
            <div class="d-flex align-items-center">
                <div class="language-selector me-3">
                    <select id="language-selector">
                        <option value="en">English</option>
                        <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
                    </select>
                </div>
                <button class="btn btn-coins me-2">ðŸª™ Buy Coins</button>
                <a href="/login" class="btn btn-login me-2">Login</a>
                <a href="/signup" class="btn btn-signup">Signup</a>
            </div>
        </div>
    </header>

    <!-- Slider Menu -->
    <div id="slider-menu" class="position-fixed vh-100" style="width: 300px; left: -300px; top: 0; background-color: #091E65; z-index: 1050; transition: left 0.3s ease;">
        <ul class="list-unstyled mt-5 px-3">
            <li class="mb-3"><a href="#" class="text-white text-decoration-none">Home</a></li>
            <li class="mb-3"><a href="#" class="text-white text-decoration-none">Audiobooks</a></li>
            <li class="mb-3"><a href="#" class="text-white text-decoration-none">Stories</a></li>
            <li class="mb-3"><a href="#" class="text-white text-decoration-none">Genres</a></li>
            <li class="mb-3"><a href="#" class="text-white text-decoration-none">Contact</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="container my-5">
        {% block content %}
        <!-- Content specific to each page will be inserted here -->
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/voice-search.js' %}"></script>
    <script>
        // Slider Menu Toggle
        const menuToggle = document.getElementById('menu-toggle');
        const sliderMenu = document.getElementById('slider-menu');

        menuToggle.addEventListener('click', () => {
            sliderMenu.style.left = sliderMenu.style.left === "0px" ? "-300px" : "0px";
        });

        document.addEventListener('click', (e) => {
            if (!sliderMenu.contains(e.target) && !menuToggle.contains(e.target)) {
                sliderMenu.style.left = "-300px";
            }
        });

        // Voice Search Toggle
        const voiceBtn = document.getElementById('voice-search-btn');
        let isRecording = false;

        voiceBtn.addEventListener('click', () => {
            isRecording = !isRecording;
            if (isRecording) {
                startVoiceSearch();
            } else {
                stopVoiceSearch();
            }
        });

        function startVoiceSearch() {
            console.log("Voice Search Started");
            // Add actual voice search logic here
        }

        function stopVoiceSearch() {
            console.log("Voice Search Stopped");
            // Add logic to stop voice search here
        }
    </script>
</body>
</html>
